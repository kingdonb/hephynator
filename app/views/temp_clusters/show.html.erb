<p id="notice"><%= notice %></p>

<div data-controller="cluster">

  <div><span class="cluster_name"><%= @temp_cluster.cluster_name %></span></div>
  <% if @temp_cluster.terminated? %>
    <div>Dead since: <span class="terminated_at"><%= @temp_cluster.terminated_at %></span>
      <%= @temp_cluster.status_badge.html_safe %></div>
  <% elsif !@temp_cluster.activated? %>
    <div><span class="terminated_at"></span>
      <%= @temp_cluster.status_badge.html_safe %></div>
  <% else %>
    <div>
      <span class="terminated_at"></span>
      <%= @temp_cluster.status_badge.html_safe %>
      <div>Name: <span class="cluster_name"><%= @temp_cluster.cluster_name %></span></div>
    </div>
  <% end %>

  <div>
    <% if !@temp_cluster.activated? %>
      <p>Clicking "Create" will cause a cluster to be born, it will live for only 4 days or less.  You can return here in order to destroy it early.</p>
      <button data-action="cluster#create">Create</button>
      <%= form_tag(@temp_cluster, method: 'put', remote: true, data: {target: 'cluster.lightup'}) do %>
      <% end %>
    <% elsif !@temp_cluster.terminated? %>
      <p>Clicking "Kubeconfig" will download a kube.config, place it in ~/.kube/config or set the <code>KUBECONFIG</code> variable to point at it on your filesystem.</p>
      <button>Kubeconfig</button>
    <% end %>
  </div>

  <% if @temp_cluster.terminated? %>
    <div>
      <p>This cluster is terminated.</p>
    </div>
  <% else %>
    <div>
      <p>This cluster is temporary!  It will expire at 12:01am Eastern Time, on
      <span class="expiry_date"><%= @temp_cluster.long_expiry_date %></span>.
      You should not deploy any permanent infrastructure on it, this is for testing only.
      </p>
    </div>
  <% end %>

</div>

<!-- <%= link_to 'Edit', edit_temp_cluster_path(@temp_cluster) %> | -->
<%= link_to 'Back', temp_clusters_path %>
